@model List<DegreeMapping.Models.Degree> 
@{ 
    int catagoryId = ViewBag.catagoryId;
    List<DegreeMapping.Models.Catalog> list_cy = ViewBag.list_cy;
    string catalogYear = list_cy.Where(x => x.Id == catagoryId).Select(x => x.Year).FirstOrDefault();
}

<div class="row pt-5">
    <h1>Catalog Year @catalogYear</h1>
    <div class="col-md-12">
        <div class="form-group">
            <select id="catalogId" name="id" class="form-control">
                <option value="0">Select Catalog Year</option>
                @foreach (DegreeMapping.Models.Catalog cy in list_cy.OrderByDescending(x => x.Current).ThenByDescending(x => x.Active).ThenBy(x => x.Year))
                {
                    string select = (catagoryId == cy.Id) ? "selected" : string.Empty;
                    if (cy.Current)
                    {
                        <option value="@cy.Id" @select>@cy.Year - Current Catalog</option>
                    }
                    <option value="@cy.Id" @select>@cy.Year</option>
                }
            </select>
        </div>
    </div>
</div>

@if (Model.Count > 0)
{
    string cataloYear = Model.Select(x => x.CatalogYear).FirstOrDefault();

    <div class="row pt-5">
        <h2>UCF Degrees</h2>
        <div class="col-md-12">
            <ul>
                @foreach (DegreeMapping.Models.Degree d in Model.OrderBy(x => x.Name))
                {
                    <li>@Html.ActionLink(d.Name, "DegreeView", "App", new { id = d.Id }, null)</li>
                }
            </ul>
        </div>
    </div>

}

<script type="text/javascript">
    $(document).ready(function () {
        $("#catalogId").on("change", function () {
            let id = $(this).val();
            window.location.href = '?id=' + id;
        })
    })
</script>