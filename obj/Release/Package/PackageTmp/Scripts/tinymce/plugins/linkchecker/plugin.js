/* Ephox link checker plugin
 *
 * Copyright 2010-2017 Ephox Corporation.  All rights reserved.
 *
 * Version: 1.0.4-47
 */

!function(){var a={},b=function(b){for(var c=a[b],e=c.deps,f=c.defn,g=e.length,h=new Array(g),i=0;i<g;++i)h[i]=d(e[i]);var j=f.apply(null,h);if(void 0===j)throw"module ["+b+"] returned undefined";c.instance=j},c=function(b,c,d){if("string"!=typeof b)throw"module id must be a string";if(void 0===c)throw"no dependencies for "+b;if(void 0===d)throw"no definition function for "+b;a[b]={deps:c,defn:d,instance:void 0}},d=function(c){var d=a[c];if(void 0===d)throw"module ["+c+"] was undefined";return void 0===d.instance&&b(c),d.instance},e=function(a,b){for(var c=a.length,e=new Array(c),f=0;f<c;++f)e.push(d(a[f]));b.apply(null,b)},f={};f.bolt={module:{api:{define:c,require:e,demand:d}}};var g=c,h=function(a,b){g(a,[],function(){return b})};h("1",tinymce),h("2",tinymce.PluginManager),h("c",window),g("3",["c"],function(a){var b=function(a,b){return function(){var c=a.console;c&&b in c&&c[b].apply(c,arguments)}};return{log:b(a,"log"),error:b(a,"error"),warn:b(a,"warm")}}),g("d",[],function(){var a=0,b=1,c=-1,d=function(a){return parseInt(a,10)},e=function(a){return function(){return a}},f=function(a,b,c){return{major:e(a),minor:e(b),patch:e(c)}},g=function(a){var b=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(a);return b?f(d(b[1]),d(b[2]),d(b[3])):f(0,0,0)},h=function(d,e){var f=d-e;return 0===f?a:f>0?b:c},i=function(b,c){var d=h(b.major(),c.major());if(d!==a)return d;var e=h(b.minor(),c.minor());if(e!==a)return e;var f=h(b.patch(),c.patch());return f!==a?f:a};return{nu:f,parse:g,compare:i}}),g("4",["d"],function(a){var b=function(a){var b=[a.majorVersion,a.minorVersion].join(".");return b.split(".").slice(0,3).join(".")},c=function(c){return c?a.parse(b(c)):null},d=function(b,d){return a.compare(c(b),a.parse(d))<0};return{getVersion:c,isLessThan:d}}),h("o",setTimeout),h("p",clearTimeout),g("e",["o","p"],function(a,b){var c=function(c,d){var e,f;return f=function(){var f=arguments;b(e),e=a(function(){c.apply(this,f)},d)},f.stop=function(){b(e)},f};return{debounce:c}}),h("f",tinymce.util.Tools),h("1g",Array),g("14",["1g"],function(a){var b=function(b){return function(){var c=a.prototype.slice.call(arguments),d=this;setTimeout(function(){b.apply(d,c)},0)}};return{bounce:b}}),g("15",[],function(){return function(a,b){var c=function(c){return a(function(a){b(function(b){var d=c(b);a(d)})})},d=function(c){return a(function(a){b(function(b){c(b).get(a)})})},e=function(c){return a(function(a){b(function(b){c.get(a)})})};return{get:b,map:c,bind:d,anonBind:e}}}),h("1m",String),g("1f",["1g","1m"],function(a,b){var c=function(a){return function(b){return a===b}},d=function(){var b=a.prototype.indexOf,d=function(a,c){return b.call(a,c)},e=function(a,b){return r(a,c(b))};return void 0===b?e:d}(),e=function(a,b){return d(a,b)>-1},f=function(a,b){return r(a,b)>-1},g=function(a,b){for(var c=[],d=0;d<a.length;d+=b){var e=a.slice(d,d+b);c.push(e)}return c},h=function(b,c){for(var d=b.length,e=new a(d),f=0;f<d;f++){var g=b[f];e[f]=c(g,f,b)}return e},i=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];b(e,c,a)}},j=function(a,b){for(var c=[],d=[],e=0,f=a.length;e<f;e++){var g=a[e],h=b(g,e,a)?c:d;h.push(g)}return{pass:c,fail:d}},k=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];b(f,d,a)&&c.push(f)}return c},l=function(a,b){if(0===a.length)return[];for(var c=b(a[0]),d=[],e=[],f=0,g=a.length;f<g;f++){var h=a[f],i=b(h);i!==c&&(d.push(e),e=[]),c=i,e.push(h)}return 0!==e.length&&d.push(e),d},m=function(a,b,c){return n(z(a),b,c)},n=function(a,b,c){return i(a,function(a){c=b(c,a)}),c},o=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e,c,a))return e}},p=function(a,b,c){var d=o(a,b);return void 0!==d?d:c},q=function(a,c,d){var e=o(a,c);if(void 0===e)throw d||"Could not find element in array: "+b(a);return e},r=function(a,b){for(var c=b||v,d=0,e=a.length;d<e;++d)if(c(a[d])===!0)return d;return-1},s=a.prototype.push,t=function(a){for(var b=[],c=0,d=a.length;c<d;++c)s.apply(b,a[c]);return b},u=function(a,b){var c=h(a,b);return t(c)},v=c(!0),w=function(a,b){for(var c=b||v,d=0,e=a.length;d<e;++d)if(c(a[d],d)!==!0)return!1;return!0},x=function(a,b){return a.length===b.length&&w(a,function(a,c){return a===b[c]})},y=a.prototype.slice,z=function(a){var b=y.call(a,0);return b.reverse(),b},A=function(a,b){return k(a,function(a){return!e(b,a)})},B=function(a,c){for(var d={},e=0,f=a.length;e<f;e++){var g=a[e];d[b(g)]=c(g,e)}return d},C=function(a){return[a]};return{map:h,each:i,partition:j,filter:k,groupBy:l,indexOf:d,foldr:m,foldl:n,find:o,findIndex:r,findOr:p,findOrDie:q,flatten:t,bind:u,forall:w,exists:f,contains:e,equal:x,reverse:z,chunk:g,difference:A,mapToObject:B,pure:C}}),g("16",["1f"],function(a){return function(b){var c=function(a){return b(function(b){b(a)})},d=function(c){return b(function(b){var d=[],e=0,f=function(a){return function(f){d[a]=f,e++,e>=c.length&&b(d)}};0===c.length?b([]):a.each(c,function(a,b){a.get(f(b))})})},e=function(b,c){return d(a.map(b,c))},f=function(a,c,d){return b(function(b){var e=!1,f=!1,g=void 0,h=void 0,i=function(){if(e&&f){var a=d(g,h);b(a)}};a.get(function(a){g=a,e=!0,i()}),c.get(function(a){h=a,f=!0,i()})})},g=function(a,b){return function(c){return b(c).bind(a)}};return{nu:b,pure:c,par:d,mapM:e,lift2:f,compose:g}}}),g("q",["14","15","16"],function(a,b,c){var d=function(c){var e=function(b){c(a.bounce(b))};return b(d,e)};return c(d)}),h("1s",Error),g("17",["1g","1s"],function(a,b){var c=function(){},d=function(a,b){return function(){return a(b.apply(null,arguments))}},e=function(a){return function(){return a}},f=function(a){return a},g=function(a,b){return a===b},h=function(b){for(var c=new a(arguments.length-1),d=1;d<arguments.length;d++)c[d-1]=arguments[d];return function(){for(var d=new a(arguments.length),e=0;e<d.length;e++)d[e]=arguments[e];var f=c.concat(d);return b.apply(null,f)}},i=function(a){return function(){return!a.apply(null,arguments)}},j=function(a){return function(){throw new b(a)}},k=function(a){return a()},l=function(a){a()},m=e(!1),n=e(!0);return{noop:c,compose:d,constant:e,identity:f,tripleEquals:g,curry:h,not:i,die:j,apply:k,call:l,never:m,always:n}}),g("r",["17"],function(a){return a}),h("1d",Object),g("18",["r","1d"],function(a,b){var c=a.constant(!1),d=a.constant(!0),e=function(){return f},f=function(){var f=function(a){return a.isNone()},g=function(a){return a()},h=function(a){return a},i={fold:function(a,b){return a()},is:c,isSome:c,isNone:d,getOr:h,getOrThunk:g,getOrDie:function(a){throw a||"error: getOrDie called on none."},or:h,orThunk:g,map:e,ap:e,each:e,bind:e,flatten:e,exists:c,forall:d,filter:e,equals:f,equals_:f,toArray:function(){return[]},toString:a.constant("none()")};return b.freeze&&b.freeze(i),i}(),g=function(a){var b=function(){return a},h=function(){return k},i=function(b){return g(b(a))},j=function(b){return b(a)},k={fold:function(b,c){return c(a)},is:function(b){return a===b},isSome:d,isNone:c,getOr:b,getOrThunk:b,getOrDie:b,or:h,orThunk:h,map:i,ap:function(b){return b.fold(e,function(b){return g(b(a))})},each:i,bind:j,flatten:b,exists:j,forall:j,filter:function(b){return b(a)?k:f},equals:function(b){return b.is(a)},equals_:function(b,d){return b.fold(c,function(b){return d(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return k},h=function(a){return null===a||void 0===a?f:g(a)},i=function(a,b){return a.equals(b)},j=function(a,b,c){return a.equals_(b,c)};return{some:g,none:e,from:h,equals:i,equals_:j}}),g("s",["r","18"],function(a,b){var c=function(a){return e(function(b,c){return c(a)})},d=function(a){return e(function(b,c){return b(a)})},e=function(e){var f=function(b){return e(a.constant(!1),function(a){return a===b})},g=function(){return e(a.constant(!1),a.constant(!0))},h=a.not(g),i=function(b){return e(a.constant(b),a.identity)},j=function(b){return e(b,a.identity)},k=function(){return e(function(b){a.die(b)()},a.identity)},l=function(b){return e(a.constant(b),c)},m=function(a){return e(a,c)},n=function(a){return p(function(b){return c(a(b))})},o=n,p=function(a){return e(d,a)},q=function(b){return e(a.constant(!1),b)},r=function(b){return e(a.constant(!0),b)},s=function(){return e(b.none,b.some)};return{is:f,isValue:g,isError:h,getOr:i,getOrThunk:j,getOrDie:k,or:l,orThunk:m,fold:e,map:n,each:o,bind:p,exists:q,forall:r,toOption:s}};return{value:c,error:d}}),g("g",["q","r","s"],function(a,b,c){var d=b.compose(a.pure,c.value),e=b.compose(a.pure,c.error),f=function(a,b,c){return a.map(function(a){return a.fold(b,c)})},g=function(a,b){return a.map(function(a){return a.bind(b)})},h=function(a,b){return a.bind(function(a){return a.bind(b)})},i=function(a,b){return a.map(function(a){return a.map(b)})},j=function(a,b,c){return a.get(function(a){return a.fold(b,c)})};return{pure:d,failed:e,foldSync:f,bindSync:g,bindAsync:h,mapSync:i,handle:j}}),g("1y",["17","1d"],function(a,b){var c=a.never,d=a.always,e=function(){return f},f=function(){var f=function(a){return a.isNone()},g=function(a){return a()},h=function(a){return a},i=function(){},j={fold:function(a,b){return a()},is:c,isSome:c,isNone:d,getOr:h,getOrThunk:g,getOrDie:function(a){throw new Error(a||"error: getOrDie called on none.")},or:h,orThunk:g,map:e,ap:e,each:i,bind:e,flatten:e,exists:c,forall:d,filter:e,equals:f,equals_:f,toArray:function(){return[]},toString:a.constant("none()")};return b.freeze&&b.freeze(j),j}(),g=function(a){var b=function(){return a},h=function(){return k},i=function(b){return g(b(a))},j=function(b){return b(a)},k={fold:function(b,c){return c(a)},is:function(b){return a===b},isSome:d,isNone:c,getOr:b,getOrThunk:b,getOrDie:b,or:h,orThunk:h,map:i,ap:function(b){return b.fold(e,function(b){return g(b(a))})},each:function(b){b(a)},bind:j,flatten:b,exists:j,forall:j,filter:function(b){return b(a)?k:f},equals:function(b){return b.is(a)},equals_:function(b,d){return b.fold(c,function(b){return d(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return k},h=function(a){return null===a||void 0===a?f:g(a)};return{some:g,none:e,from:h}}),g("1t",["1y","1g","1s","1m"],function(a,b,c,d){var e=function(){var a=b.prototype.indexOf,c=function(b,c){return a.call(b,c)},d=function(a,b){return u(a,b)};return void 0===a?d:c}(),f=function(b,c){var d=e(b,c);return d===-1?a.none():a.some(d)},g=function(a,b){return e(a,b)>-1},h=function(a,b){return t(a,b).isSome()},i=function(a,b){for(var c=[],d=0;d<a;d++)c.push(b(d));return c},j=function(a,b){for(var c=[],d=0;d<a.length;d+=b){var e=a.slice(d,d+b);c.push(e)}return c},k=function(a,c){for(var d=a.length,e=new b(d),f=0;f<d;f++){var g=a[f];e[f]=c(g,f,a)}return e},l=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];b(e,c,a)}},m=function(a,b){for(var c=a.length-1;c>=0;c--){var d=a[c];b(d,c,a)}},n=function(a,b){for(var c=[],d=[],e=0,f=a.length;e<f;e++){var g=a[e],h=b(g,e,a)?c:d;h.push(g)}return{pass:c,fail:d}},o=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];b(f,d,a)&&c.push(f)}return c},p=function(a,b){if(0===a.length)return[];for(var c=b(a[0]),d=[],e=[],f=0,g=a.length;f<g;f++){var h=a[f],i=b(h);i!==c&&(d.push(e),e=[]),c=i,e.push(h)}return 0!==e.length&&d.push(e),d},q=function(a,b,c){return m(a,function(a){c=b(c,a)}),c},r=function(a,b,c){return l(a,function(a){c=b(c,a)}),c},s=function(b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d];if(c(f,d,b))return a.some(f)}return a.none()},t=function(b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d];if(c(f,d,b))return a.some(d)}return a.none()},u=function(a,b){for(var c=0,d=a.length;c<d;++c)if(a[c]===b)return c;return-1},v=b.prototype.push,w=function(a){for(var d=[],e=0,f=a.length;e<f;++e){if(!b.prototype.isPrototypeOf(a[e]))throw new c("Arr.flatten item "+e+" was not an array, input: "+a);v.apply(d,a[e])}return d},x=function(a,b){var c=k(a,b);return w(c)},y=function(a,b){for(var c=0,d=a.length;c<d;++c){var e=a[c];if(b(e,c,a)!==!0)return!1}return!0},z=function(a,b){return a.length===b.length&&y(a,function(a,c){return a===b[c]})},A=b.prototype.slice,B=function(a){var b=A.call(a,0);return b.reverse(),b},C=function(a,b){return o(a,function(a){return!g(b,a)})},D=function(a,b){for(var c={},e=0,f=a.length;e<f;e++){var g=a[e];c[d(g)]=b(g,e)}return c},E=function(a){return[a]},F=function(a,b){var c=A.call(a,0);return c.sort(b),c};return{map:k,each:l,eachr:m,partition:n,filter:o,groupBy:p,indexOf:f,foldr:q,foldl:r,find:s,findIndex:t,flatten:w,bind:x,forall:y,exists:h,contains:g,equal:z,reverse:B,chunk:j,difference:C,mapToObject:D,pure:E,sort:F,range:i}}),g("29",["1g","1m"],function(a,b){var c=function(c){if(null===c)return"null";var d=typeof c;return"object"===d&&a.prototype.isPrototypeOf(c)?"array":"object"===d&&b.prototype.isPrototypeOf(c)?"string":d},d=function(a){return function(b){return c(b)===a}};return{isString:d("string"),isObject:d("object"),isArray:d("array"),isNull:d("null"),isBoolean:d("boolean"),isUndefined:d("undefined"),isFunction:d("function"),isNumber:d("number")}}),g("1u",["29","1g","1s"],function(a,b,c){var d=function(a,b){return b},e=function(b,c){var d=a.isObject(b)&&a.isObject(c);return d?g(b,c):c},f=function(a){return function(){for(var d=new b(arguments.length),e=0;e<d.length;e++)d[e]=arguments[e];if(0===d.length)throw new c("Can't merge zero objects");for(var f={},g=0;g<d.length;g++){var h=d[g];for(var i in h)h.hasOwnProperty(i)&&(f[i]=a(f[i],h[i]))}return f}},g=f(e),h=f(d);return{deepMerge:g,merge:h}}),g("1v",["17","1y"],function(a,b){var c=function(d){var e=function(a){return d===a},f=function(a){return c(d)},g=function(a){return c(d)},h=function(a){return c(a(d))},i=function(a){a(d)},j=function(a){return a(d)},k=function(a,b){return b(d)},l=function(a){return a(d)},m=function(a){return a(d)},n=function(){return b.some(d)};return{is:e,isValue:a.constant(!0),isError:a.constant(!1),getOr:a.constant(d),getOrThunk:a.constant(d),getOrDie:a.constant(d),or:f,orThunk:g,fold:k,map:h,each:i,bind:j,exists:l,forall:m,toOption:n}},d=function(c){var e=function(a){return a()},f=function(){return a.die(c)()},g=function(a){return a},h=function(a){return a()},i=function(a){return d(c)},j=function(a){return d(c)},k=function(a,b){return a(c)};return{is:a.constant(!1),isValue:a.constant(!1),isError:a.constant(!0),getOr:a.identity,getOrThunk:e,getOrDie:f,or:g,orThunk:h,fold:k,map:i,each:a.noop,bind:j,exists:a.constant(!1),forall:a.constant(!0),toOption:b.none}};return{value:c,error:d}}),g("1x",["1y","1d"],function(a,b){var c=function(){var a=b.keys,c=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};return void 0===a?c:a}(),d=function(a,b){for(var d=c(a),e=0,f=d.length;e<f;e++){var g=d[e],h=a[g];b(h,g,a)}},e=function(a,b){return f(a,function(a,c,d){return{k:c,v:b(a,c,d)}})},f=function(a,b){var c={};return d(a,function(d,e){var f=b(d,e,a);c[f.k]=f.v}),c},g=function(a,b){var c={},e={};return d(a,function(a,d){var f=b(a,d)?c:e;f[d]=a}),{t:c,f:e}},h=function(a,b){var c=[];return d(a,function(a,d){c.push(b(a,d))}),c},i=function(b,d){for(var e=c(b),f=0,g=e.length;f<g;f++){var h=e[f],i=b[h];if(d(i,h,b))return a.some(i)}return a.none()},j=function(a){return h(a,function(a){return a})},k=function(a){return j(a).length};return{bifilter:g,each:d,map:e,mapToArray:h,tupleMap:f,find:i,keys:c,values:j,size:k}}),g("2a",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),g("28",["1t","1x","29","1g","1s","2a"],function(a,b,c,d,e,f){var g=function(g){if(!c.isArray(g))throw new e("cases must be an array");if(0===g.length)throw new e("there must be at least one case");var h=[],i={};return a.each(g,function(j,k){var l=b.keys(j);if(1!==l.length)throw new e("one and only one name per case");var m=l[0],n=j[m];if(void 0!==i[m])throw new e("duplicate key detected:"+m);if("cata"===m)throw new e("cannot have a case named cata (sorry)");if(!c.isArray(n))throw new e("case arguments must be an array");h.push(m),i[m]=function(){var c=arguments.length;if(c!==n.length)throw new e("Wrong number of arguments to case "+m+". Expected "+n.length+" ("+n+"), got "+c);for(var i=new d(c),j=0;j<i.length;j++)i[j]=arguments[j];var l=function(c){var d=b.keys(c);if(h.length!==d.length)throw new e("Wrong number of arguments to match. Expected: "+h.join(",")+"\nActual: "+d.join(","));var f=a.forall(h,function(b){return a.contains(d,b)});if(!f)throw new e("Not all branches were specified when using match. Specified: "+d.join(", ")+"\nRequired: "+h.join(", "));return c[m].apply(null,i)};return{fold:function(){if(arguments.length!==g.length)throw new e("Wrong number of arguments to fold. Expected "+g.length+", got "+arguments.length);var a=arguments[k];return a.apply(null,i)},match:l,log:function(a){f.log(a,{constructors:h,constructor:m,params:i})}}}}),i};return{generate:g}}),g("1w",["28","1t"],function(a,b){var c=a.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),d=function(a){var c=[],d=[];return b.each(a,function(a){a.fold(function(a){c.push(a)},function(a){d.push(a)})}),{errors:c,values:d}},e=function(a,b){return a.fold(function(a){return b.fold(function(b){return c.bothErrors(a,b)},function(b){return c.firstError(a,b)})},function(a){return b.fold(function(b){return c.secondError(a,b)},function(b){return c.bothValues(a,b)})})};return{partition:d,compare:e}}),g("19",["1t","17","1u","1v","1w"],function(a,b,c,d,e){var f=function(a,b){return d.value(c.deepMerge.apply(void 0,[b].concat(a)))},g=function(c){return b.compose(d.error,a.flatten)(c)},h=function(a,b){var c=e.partition(a);return c.errors.length>0?g(c.errors):f(c.values,b)},i=function(a){var b=e.partition(a);return b.errors.length>0?g(b.errors):d.value(b.values)};return{consolidateObj:h,consolidateArr:i}}),g("1a",["1t","1x"],function(a,b){var c=function(b,c){var d={};return a.each(c,function(a){void 0!==b[a]&&b.hasOwnProperty(a)&&(d[a]=b[a])}),d},d=function(b,c){var d={};return a.each(b,function(a){var b=a[c];d[b]=a}),d},e=function(c,d){var e={};return b.each(c,function(b,c){a.contains(d,c)||(e[c]=b)}),e};return{narrow:c,exclude:e,indexOnKey:d}}),g("1b",["1y"],function(a){var b=function(b){return function(c){return c.hasOwnProperty(b)?a.from(c[b]):a.none()}},c=function(a,c){return function(d){return b(a)(d).getOr(c)}},d=function(a,c){return b(c)(a)},e=function(a,b){return a.hasOwnProperty(b)&&void 0!==a[b]&&null!==a[b]};return{readOpt:b,readOr:c,readOptFrom:d,hasKey:e}}),g("1c",["1t"],function(a){var b=function(a,b){var c={};return c[a]=b,c},c=function(b){var c={};return a.each(b,function(a){c[a.key]=a.value}),c};return{wrap:b,wrapAll:c}}),g("t",["19","1a","1b","1c"],function(a,b,c,d){var e=function(a,c){return b.narrow(a,c)},f=function(a,c){return b.exclude(a,c)},g=function(a){return c.readOpt(a)},h=function(a,b){return c.readOr(a,b)},i=function(a,b){return c.readOptFrom(a,b)},j=function(a,b){return d.wrap(a,b)},k=function(a){return d.wrapAll(a)},l=function(a,c){return b.indexOnKey(a,c)},m=function(b,c){return a.consolidateObj(b,c)},n=function(a,b){return c.hasKey(a,b)};return{narrow:e,exclude:f,readOpt:g,readOr:h,readOptFrom:i,wrap:j,wrapAll:k,indexOnKey:l,hasKey:n,consolidate:m}}),g("u",["1d"],function(a){var b=function(){var b=a.keys,c=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};return void 0===b?c:b}(),c=function(a,c){for(var d=b(a),e=0,f=d.length;e<f;e++){var g=d[e],h=a[g];c(h,g,a)}},d=function(a,b){return e(a,function(a,c,d){return{k:c,v:b(a,c,d)}})},e=function(a,b){var d={};return c(a,function(c,e){var f=b(c,e,a);d[f.k]=f.v}),d},f=function(a,b){var d={},e={};return c(a,function(a,c){var f=b(a,c)?d:e;f[c]=a}),{t:d,f:e}},g=function(a,b){var d=[];return c(a,function(a,c){d.push(b(a,c))}),d},h=function(a,c){for(var d=b(a),e=0,f=d.length;e<f;e++){var g=d[e],h=a[g];if(c(h,g,a))return h}},i=function(a){return g(a,function(a){return a})},j=function(a){return i(a).length};return{bifilter:f,each:c,map:d,mapToArray:g,tupleMap:e,find:h,keys:b,values:i,size:j}}),g("1e",["1g","1m"],function(a,b){var c=function(c){if(null===c)return"null";var d=typeof c;return"object"===d&&a.prototype.isPrototypeOf(c)?"array":"object"===d&&b.prototype.isPrototypeOf(c)?"string":d},d=function(a){return function(b){return c(b)===a}};return{isString:d("string"),isObject:d("object"),isArray:d("array"),isNull:d("null"),isBoolean:d("boolean"),isUndefined:d("undefined"),isFunction:d("function"),isNumber:d("number")}}),g("v",["1e","1f","u","1g"],function(a,b,c,d){var e=function(e){if(!a.isArray(e))throw"cases must be an array";if(0===e.length)throw"there must be at least one case";var f={};return b.each(e,function(b,g){var h=c.keys(b);if(1!==h.length)throw"one and only one name per case";var i=h[0],j=b[i];if(void 0!==f[i])throw"duplicate key detected:"+i;if("cata"===i)throw"cannot have a case named cata (sorry)";if(!a.isArray(j))throw"case arguments must be an array";f[i]=function(){var a=arguments.length;if(a!==j.length)throw"Wrong number of arguments to case "+i+". Expected "+j.length+" ("+j+"), got "+a;for(var b=new d(a),c=0;c<b.length;c++)b[c]=arguments[c];return{fold:function(){if(arguments.length!==e.length)throw"Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length;var a=arguments[g];return a.apply(null,b)}}}}),f};return{generate:e}}),g("i",["v"],function(a){var b=a.generate([{invalid:["invalidUrl"]},{unknown:["unknownUrl"]},{valid:["validUrl"]}]),c=function(a,b,c,d){return a.fold(b,c,d)},d=function(a,c){return"VALID"===c?b.valid(a):"INVALID"===c?b.invalid(a):b.unknown(a)};return{cata:c,derive:d}}),h("1h",Date),g("z",["1h"],function(a){var b=function(){return(new a).getTime()};return{now:b}}),g("20",["1f","u","r","1g"],function(a,b,c,d){var e=function(e,f){var g=function(){for(var b=new d(arguments.length),f=0;f<b.length;f++)b[f]=arguments[f];if(e.length!==b.length)throw'Wrong number of arguments to struct. Expected "['+e.length+']", got '+b.length+" arguments";var g={};return a.each(e,function(a,d){g[a]=c.constant(b[d])}),g},h=function(a,b){for(var d=0;d<e.length;d++){var g=f&&f[d]||c.tripleEquals,h=e[d];if(!g(a[h](),b[h]()))return!1}return!0},i=function(a){return b.map(a,function(a){return a()})};return{nu:g,eq:h,evaluate:i}};return{product:e}}),g("1z",["20"],function(a){return function(){return a.product(arguments).nu}}),g("2b",["1e","1f"],function(a,b){var c=function(a){return a.slice(0).sort()},d=function(a,b){throw"All required keys ("+c(a).join(", ")+") were not specified. Specified keys were: "+c(b).join(", ")+"."},e=function(a){throw"Unsupported keys for object: "+c(a).join(", ")},f=function(c,d){if(!a.isArray(d))throw"The "+c+" fields must be an array. Was: "+d+".";b.each(d,function(b){if(!a.isString(b))throw"The value "+b+" in the "+c+" fields was not a string."})},g=function(a,b){throw"All values need to be of type: "+b+". Keys ("+c(a).join(", ")+") were not."},h=function(a){var d=c(a),e=b.find(d,function(a,b){return b<d.length-1&&a===d[b+1]});if(void 0!==e&&null!==e)throw"The field: "+e+" occurs more than once in the combined fields: ["+d.join(", ")+"]."};return{sort:c,reqMessage:d,unsuppMessage:e,validateStrArr:f,invalidTypeMessage:g,checkDupes:h}}),g("21",["1f","u","r","18","2b","1d"],function(a,b,c,d,e,f){return function(g,h){var i=g.concat(h);if(0===i.length)throw"You must specify at least one required or optional field.";return e.validateStrArr("required",g),e.validateStrArr("optional",h),e.checkDupes(i),function(j){var k=b.keys(j),l=a.forall(g,function(b){return a.contains(k,b)});l||e.reqMessage(g,k);var m=a.filter(k,function(b){return!a.contains(i,b)});m.length>0&&e.unsuppMessage(m);var n={};return a.each(g,function(a){n[a]=c.constant(j[a])}),a.each(h,function(a){n[a]=c.constant(f.prototype.hasOwnProperty.call(j,a)?d.some(j[a]):d.none())}),n}}}),g("1i",["1z","20","21"],function(a,b,c){return{immutable:a,immutable2:b,immutableBag:c}}),g("w",["1e","u","z","18","1i"],function(a,b,c,d,e){var f=36e5;return function(g,h){var i=void 0!==h?h:f,j=e.immutable("result","timestamp"),k={},l=function(a,b,c){k[a]=j(b,c)},m=function(a,b){return d.from(k[b]).filter(function(b){return a-b.timestamp()<i}).map(function(a){return a.result()})},n=function(){return b.map(k,function(a){return{result:a.result(),timestamp:a.timestamp()}})},o=function(a){var d=c.now();b.map(a,function(a,b){d-a.timestamp<i&&l(b,a.result,a.timestamp)})};return a.isObject(g)&&o(g),{set:l,get:m,dump:n}}}),g("2r",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),g("2p",["2r"],function(a){var b=function(b,c){for(var d=void 0!==c?c:a,e=0;e<b.length&&void 0!==d&&null!==d;++e)d=d[b[e]];return d},c=function(a,c){var d=a.split(".");return b(d,c)},d=function(a,b){return void 0!==a[b]&&null!==a[b]||(a[b]={}),a[b]},e=function(b,c){for(var e=void 0!==c?c:a,f=0;f<b.length;++f)e=d(e,b[f]);return e},f=function(a,b){var c=a.split(".");return e(c,b)};return{path:b,resolve:c,forge:e,namespace:f}}),g("2m",["2p"],function(a){var b=function(b,c){return a.resolve(b,c)},c=function(a,c){var d=b(a,c);if(void 0===d)throw a+" not available on this browser";return d};return{getOrDie:c}}),g("2e",["2m"],function(a){var b=function(){return a.getOrDie("JSON")},c=function(a){return b().parse(a)},d=function(a,c,d){return b().stringify(a,c,d)};return{parse:c,stringify:d}}),g("24",["1t","1x","29","2e"],function(a,b,c,d){var e=function(a){return c.isObject(a)&&b.keys(a).length>100?" removed due to size":d.stringify(a,null,2)},f=function(b){var c=b.length>10?b.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):b;return a.map(c,function(a){return"Failed path: ("+a.path.join(" > ")+")\n"+a.getErrorInfo()})};return{formatObj:e,formatErrors:f}}),g("2c",["24","1v"],function(a,b){var c=function(a,c){return b.error([{path:a,getErrorInfo:c}])},d=function(b,d,e){return c(b,function(){return'Could not find valid *strict* value for "'+d+'" in '+a.formatObj(e)})},e=function(a,b){return c(a,function(){return'Choice schema did not contain choice key: "'+b+'"'})},f=function(b,d,e){return c(b,function(){return'The chosen schema: "'+e+'" did not exist in branches: '+a.formatObj(d)})},g=function(a,b){return c(a,function(){return"There are unsupported fields: ["+b.join(", ")+"] specified"})},h=function(a,b){return c(a,function(){return b})},i=function(a){return"Failed path: ("+a.path.join(" > ")+")\n"+a.getErrorInfo()};return{missingStrict:d,missingKey:e,missingBranch:f,unsupportedFields:g,custom:h,toString:i}}),g("1p",["28","17"],function(a,b){var c=a.generate([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),d=function(a){return c.defaultedThunk(b.constant(a))},e=function(a){return c.asDefaultedOptionThunk(b.constant(a))},f=function(a){return c.mergeWithThunk(b.constant(a))};return{strict:c.strict,asOption:c.asOption,defaulted:d,defaultedThunk:c.defaultedThunk,asDefaultedOption:e,asDefaultedOptionThunk:c.asDefaultedOptionThunk,mergeWith:f,mergeWithThunk:c.mergeWithThunk}}),g("2d",["28"],function(a){var b=a.generate([{setOf:["validator","valueType"]},{arrOf:["valueType"]},{objOf:["fields"]},{itemOf:["validator"]},{choiceOf:["key","branches"]}]),c=a.generate([{field:["name","presence","type"]},{state:["name"]}]);return{typeAdt:b,fieldAdt:c}}),g("23",["1p","t","19","1b","1c","2c","2d","28","1t","17","1u","1x","1y","1v","29"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=h.generate([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),q=function(a,b){return p.state(a,j.constant(b))},r=function(a){return p.state(a,j.identity)},s=function(a,b,c){return d.readOptFrom(b,c).fold(function(){return f.missingStrict(a,c,b)},n.value)},t=function(a,b,c){var e=d.readOptFrom(a,b).fold(function(){return c(a)},j.identity);return n.value(e)},u=function(a,b){return n.value(d.readOptFrom(a,b))},v=function(a,b,c){var e=d.readOptFrom(a,b).map(function(b){return b===!0?c(a):b});return n.value(e)},w=function(a,b,c,d){return c.fold(function(c,f,g,h){var i=function(b){return h.extract(a.concat([c]),d,b).map(function(a){return e.wrap(f,d(a))})},l=function(b){return b.fold(function(){var a=e.wrap(f,d(m.none()));return n.value(a)},function(b){return h.extract(a.concat([c]),d,b).map(function(a){return e.wrap(f,d(m.some(a)))})})};return function(){return g.fold(function(){return s(a,b,c).bind(i)},function(a){return t(b,c,a).bind(i)},function(){return u(b,c).bind(l)},function(a){return v(b,c,a).bind(l)},function(a){var d=a(b);return t(b,c,j.constant({})).map(function(a){return k.deepMerge(d,a)}).bind(i)})}()},function(a,c){var f=c(b);return n.value(e.wrap(a,d(f)))})},x=function(a,b,d,e){var f=i.map(d,function(c){return w(a,b,c,e)});return c.consolidateObj(f,{})},y=function(a){var b=function(b,c,d){return a(d).fold(function(a){return f.custom(b,a)},n.value)},c=function(){return"val"},d=function(){return g.typeAdt.itemOf(a)};return{extract:b,toString:c,toDsl:d}},z=function(a){var c=A(a),d=i.foldr(a,function(a,c){return c.fold(function(c){return k.deepMerge(a,b.wrap(c,!0))},j.constant(a))},{}),e=function(a,e,g){var h=o.isBoolean(g)?[]:i.filter(l.keys(g),function(a){return void 0!==g[a]}),j=i.filter(h,function(a){return!b.hasKey(d,a)});return 0===j.length?c.extract(a,e,g):f.unsupportedFields(a,j)};return{extract:e,toString:c.toString,toDsl:c.toDsl}},A=function(a){var b=function(b,c,d){return x(b,d,a,c)},c=function(){var b=i.map(a,function(a){return a.fold(function(a,b,c,d){return a+" -> "+d.toString()},function(a,b){return"state("+a+")"})});return"obj{\n"+b.join("\n")+"}"},d=function(){return g.typeAdt.objOf(i.map(a,function(a){return a.fold(function(a,b,c,d){return g.fieldAdt.field(a,c,d)},function(a,b){return g.fieldAdt.state(a)})}))};return{extract:b,toString:c,toDsl:d}},B=function(a){var b=function(b,d,e){var f=i.map(e,function(c,e){return a.extract(b.concat(["["+e+"]"]),d,c)});return c.consolidateArr(f)},d=function(){return"array("+a.toString()+")"},e=function(){return g.typeAdt.arrOf(a)};return{extract:b,toString:d,toDsl:e}},C=function(b,c){var d=function(a,c){return B(y(b)).extract(a,j.identity,c)},e=function(b,e,f){var g=l.keys(f);return d(b,g).bind(function(d){var g=i.map(d,function(b){return p.field(b,b,a.strict(),c)});return A(g).extract(b,e,f)})},f=function(){return"setOf("+c.toString()+")"},h=function(){return g.typeAdt.setOf(b,c)};return{extract:e,toString:f,toDsl:h}},D=y(n.value),E=j.compose(B,A);return{anyValue:j.constant(D),value:y,obj:A,objOnly:z,arr:B,setOf:C,arrOfObj:E,state:p.state,field:p.field,output:q,snapshot:r}}),g("22",["t","2c","23","2d","1x"],function(a,b,c,d,e){var f=function(d,e,f,g,h){var i=a.readOptFrom(g,h);return i.fold(function(){return b.missingBranch(d,g,h)},function(a){return c.obj(a).extract(d.concat(["branch: "+h]),e,f)})},g=function(c,g){var h=function(d,e,h){var i=a.readOptFrom(h,c);return i.fold(function(){return b.missingKey(d,c)},function(a){return f(d,e,h,g,a)})},i=function(){return"chooseOn("+c+"). Possible values: "+e.keys(g)},j=function(){return d.typeAdt.choiceOf(c,g)};return{extract:h,toString:i,toDsl:j}};return{choose:g}}),g("1j",["22","23","24","17","1v","1s"],function(a,b,c,d,e,f){var g=b.value(e.value),h=function(a){return b.arrOfObj(a)},i=function(){return b.arr(g)},j=b.arr,k=b.obj,l=b.objOnly,m=b.setOf,n=function(a){return b.value(a)},o=function(a,b,c,d){return b.extract([a],c,d).fold(function(a){return e.error({input:d,errors:a})},e.value)},p=function(a,b,c){return o(a,b,d.constant,c)},q=function(a,b,c){return o(a,b,d.identity,c)},r=function(a){return a.fold(function(a){throw new f(u(a))},d.identity)},s=function(a,b,c){return r(q(a,b,c))},t=function(a,b,c){return r(p(a,b,c))},u=function(a){return"Errors: \n"+c.formatErrors(a.errors)+"\n\nInput object: "+c.formatObj(a.input)},v=function(b,c){return a.choose(b,c)};return{anyValue:d.constant(g),arrOfObj:h,arrOf:j,arrOfVal:i,valueOf:n,setOf:m,objOf:k,objOfOnly:l,asStruct:p,asRaw:q,asStructOrDie:t,asRawOrDie:s,getOrDie:r,formatError:u,choose:v}}),g("1n",["1e","1g"],function(a,b){var c=function(a,b){return b},d=function(b,c){var d=a.isObject(b)&&a.isObject(c);
return d?f(b,c):c},e=function(a){return function(){for(var c=new b(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];if(0===c.length)throw"Can't merge zero objects";for(var e={},f=0;f<c.length;f++){var g=c[f];for(var h in g)g.hasOwnProperty(h)&&(e[h]=a(e[h],g[h]))}return e}},f=e(d),g=e(c);return{deepMerge:f,merge:g}}),g("2q",[],function(){return Function("return this;")()}),g("2o",["2q"],function(a){var b=function(b,c){for(var d=c||a,e=0;e<b.length&&void 0!==d&&null!==d;++e)d=d[b[e]];return d},c=function(a,c){var d=a.split(".");return b(d,c)};return{path:b,resolve:c}}),g("2l",["2o"],function(a){var b=function(b,c){return a.resolve(b,c)},c=function(a,c){var d=b(a,c);if(void 0===d)throw a+" not available on this browser";return d};return{getOrDie:c}}),g("2n",["2l"],function(a){return function(){var b=a.getOrDie("FileReader");return new b}}),g("2f",["q","2n"],function(a,b){return function(c){return a.nu(function(a){var d=b();d.onload=function(b){var c=b.target;a(c.result)},d.readAsText(c)})}}),g("2g",["2l"],function(a){return function(){var b=a.getOrDie("XMLHttpRequest");return new b}}),h("2h",Math),h("2i",isFinite),h("2j",isNaN),h("2k",parseFloat),g("27",["2h","2i","2j","2k"],function(a,b,c,d){var e=function(a){return function(b,c){var d=typeof c;if(d!==a)throw b+" was not a "+a+". Was: "+c+" ("+d+")"}},f=e("string"),g=function(a,b){f(a,b);var c=b.length;if(1!==c)throw a+" was not a single char. Was: "+b},h=e("number"),i=function(b,c){if(h(b,c),c!==a.abs(c))throw b+" was not an integer. Was: "+c},j=function(a){return!c(d(a))&&b(a)},k=function(a,b){if(i(a,b),b<0)throw a+" was not a natural number. Was: "+b};return{vString:f,vChar:g,vInt:i,vNat:k,pNum:j}}),g("1l",["27"],function(a){var b=function(a,b,c){if(""===b)return!0;if(a.length<b.length)return!1;var d=a.substr(c,c+b.length);return d===b},c=function(a,b){var c=function(a){var b=typeof a;return"string"===b||"number"===b};return a.replace(/\${([^{}]*)}/g,function(a,d){var e=b[d];return c(e)?e:a})},d=function(a){var b=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c};return function(){var c=b(arguments,function(a){return"string"==typeof a?a.toLowerCase():a});return a.apply(this,c)}},e=function(a,c){return b(a,c,0)},f=d(e),g=function(a,c){return b(a,c,a.length-c.length)},h=d(g),i=function(a,b){return a.substr(0,b)},j=function(a,b){return a.substr(a.length-b,a.length)},k=function(a,b){return function(c,d){return a(c,d)?b(c,c.length-d.length):c}},l=k(e,j),m=k(g,i),n=function(a,b){return a+b},o=function(a,b){return b+a},p=function(a,b){return function(c,d){return a(c,d)?c:b(c,d)}},q=p(e,o),r=p(g,n),s=function(a){return a.replace(/^\s+|\s+$/g,"")},t=function(a){return a.replace(/^\s+/g,"")},u=function(a){return a.replace(/\s+$/g,"")},v=function(a,b){return a.indexOf(b)!=-1},w=d(v),x=function(a){return a.replace(/\"/gm,"&quot;")},y=function(a,b){return a===b},z=d(y),A=function(a){if(""===a)throw"head on empty string";return a.substr(0,1)},B=function(a){if(""===a)throw"toe on empty string";return a.substr(a.length-1,a.length)},C=function(a){if(""===a)throw"tail on empty string";return a.substr(1,a.length-1)},D=function(a){if(""===a)throw"torso on empty string";return a.substr(0,a.length-1)},E=function(a){return""===a?a:A(a).toUpperCase()+C(a)},F=function(b,c){a.vString("str",b),a.vNat("num",c);for(var d="",e=0;e<c;e++)d+=b;return d},G=function(b){return function(c,d,e){a.vString("str",c),a.vChar("c",d),a.vNat("width",e);var f=c.length;return f>=e?c:b(c,F(d,e-f))}},H=G(function(a,b){return b+a}),I=G(function(a,b){return a+b});return{supplant:c,startsWith:e,startsWithIgnoringCase:f,endsWith:g,endsWithIgnoringCase:h,first:i,last:j,removeLeading:l,removeTrailing:m,ensureLeading:q,ensureTrailing:r,trim:s,lTrim:t,rTrim:u,contains:v,containsIgnoringCase:w,htmlEncodeDoubleQuotes:x,equals:y,equalsIgnoringCase:z,head:A,repead:F,padLeft:H,padRight:I,toe:B,tail:C,torso:D,capitalize:E}}),g("25",["1e","u","1n","2f","q","2g","18","s","1l","2a"],function(a,b,c,d,e,f,g,h,i,j){var k={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},l=function(l,m,n,o){var p={url:l,contentType:"application/json",processData:!1,type:"GET"},q=c.merge(p,o),r=f();r.open(q.type.toUpperCase(),q.url,!0),"blob"===q.responseType&&(r.responseType=q.responseType),a.isString(q.contentType)&&r.setRequestHeader("Content-Type",q.contentType);var s=q.dataType,t=a.isString(s)&&"*"!==s?k[s]+", "+k["*"]+"; q=0.01":k["*"];r.setRequestHeader("Accept",t),void 0!==q.xhrFields&&q.xhrFields.withCredentials===!0&&(r.withCredentials=!0),a.isObject(q.headers)&&b.each(q.headers,function(b,c){a.isString(c)||a.isString(b)?r.setRequestHeader(c,b):j.error("Request header data was not a string: ",c," -> ",b)});var u=function(a,b,c){m(a)},v=function(){return"blob"===q.responseType?g.from(r.response).map(d).getOr(e.pure("no response content")):e.pure(r.responseText)},w=function(){v().get(function(a){0===r.status?n("Unknown HTTP error (possible cross-domain request)",r.status,a):n('Could not load url "'+l+'": '+r.statusText,r.status,a)})},x=function(){try{return h.value(JSON.parse(r.response))}catch(a){return h.error({status:r.status,statusText:"Response was not JSON",responseText:r.responseText})}},y=function(){var a="json"===s?x(r):h.value(r.response);a.fold(w,function(a){u(a,r.statusText,r)})},z=function(){0===r.status?i.startsWith(q.url,"file:")?y():w():r.status<100||r.status>=400?w():y()};r.onerror=w,r.onload=z,void 0===q.data?r.send():r.send(q.data)};return{ajax:l}}),g("26",["2l"],function(a){var b=function(){return a.getOrDie("JSON")},c=function(a){return b().parse(a)},d=function(a,c,d){return b().stringify(a,c,d)};return{parse:c,stringify:d}}),g("1k",["1n","25","26"],function(a,b,c){var d=function(a){try{var b=void 0===a||""===a;return b?a:c.parse(a)}catch(d){return{contents:a}}},e=function(a){return function(b,c,e){a(b,c,d(e))}},f=function(a,b,c,d){h(a,"GET",b,c,d)},g=function(b,d,e,f,g){h(b,"POST",e,f,a.merge({data:c.stringify(d)},g))},h=function(c,d,f,g,h){b.ajax(c,f,e(g),a.merge({dataType:"json",type:d},h))};return{get:f,post:g,ajax:h}}),h("11",encodeURIComponent),g("x",["1j","1e","u","1k","q","s","1l","11","1m"],function(a,b,c,d,e,f,g,h,i){var j=function(a,b){var c=a.indexOf("?")===-1?"?":"&";return b?a+c+"apiKey="+h(b):a},k=function(a){return a.hasOwnProperty("tiny-api-key")?a["tiny-api-key"]:a.hasOwnProperty("tinymce-api-key")?a["tinymce-api-key"]:a["textbox-api-key"]},l=function(h,l,m,n){var o=k(n),p={headers:n},q=function(k){var n=a.asRawOrDie(h+".ajax.service.get",l,k),q=c.map(n,function(a){return b.isBoolean(a)?i(a):a}),r=j(g.supplant(m,q),o);return e.nu(function(a){d.get(r,function(b){a(f.value(b))},function(c,d,e){var g=b.isObject(e)?e:c;a(f.error(g))},p)})};return{execute:q}},m=function(c,g,h,i){var l=k(i),m={headers:i},n=function(i){var k=a.asRawOrDie(c+".ajax.service.post",g,i);return e.nu(function(a){d.post(j(h,l),k,function(b){a(f.value(b))},function(c,d,e){var g=b.isObject(e)?e:c;a(f.error(g))},m)})};return{execute:n}};return{get:l,post:m}}),g("1o",["t","1f","1n"],function(a,b,c){var d=function(d,e,f,g,h){return h===!0?{known:{},unknown:f}:b.foldl(f,function(b,f){var h=g(f);return d(e,h).fold(function(){return{known:b.known,unknown:b.unknown.concat([f])}},function(d){var e=a.wrap(h,d);return{known:c.merge(b.known,e),unknown:b.unknown}})},{known:{},unknown:[]})};return{partition:d}}),g("y",["u","1n","g","1o","18"],function(a,b,c,d,e){var f=function(a,b,d,f,g){var h=g===!0?e.none():b.get(f,d);return h.fold(function(){return a(d,g).map(function(a){return a.map(function(a){return b.set(d,a,f),a})})},function(a){return c.pure(a)})},g=function(d,e,f,g,h,i,j){var k=d(g,j);return c.mapSync(k,function(c){var d=h(c);return a.each(d,function(a,b){e.set(b,a,i)}),b.deepMerge(f,d)})},h=function(a,b,e,f,h,i,j){var k=d.partition(b.get,i,e,h,j);return 0===k.unknown.length?c.pure(k.known):g(a,b,k.known,k.unknown,f,i,j)};return{single:f,multiple:h}}),g("1q",["1p","23","1v","29"],function(a,b,c,d){var e=function(c){return b.field(c,c,a.strict(),b.anyValue())},f=function(c,d){return b.field(c,c,a.strict(),d)},g=function(e){return b.field(e,e,a.strict(),b.value(function(a){return d.isFunction(a)?c.value(a):c.error("Not a function")}))},h=function(d,e){return b.field(d,d,a.asOption(),b.value(function(a){return c.error("The field: "+d+" is forbidden. "+e)}))},i=function(a,b){return f(a,b)},j=function(c,d){return b.field(c,c,a.strict(),b.obj(d))},k=function(c,d){return b.field(c,c,a.strict(),b.arrOfObj(d))},l=function(c){return b.field(c,c,a.asOption(),b.anyValue())},m=function(c,d){return b.field(c,c,a.asOption(),d)},n=function(c,d){return b.field(c,c,a.asOption(),b.obj(d))},o=function(c,d){return b.field(c,c,a.asOption(),b.objOnly(d))},p=function(c,d){return b.field(c,c,a.defaulted(d),b.anyValue())},q=function(c,d,e){return b.field(c,c,a.defaulted(d),e)},r=function(c,d,e){return b.field(c,c,a.defaulted(d),b.obj(e))},s=function(a,c,d,e){return b.field(a,c,d,e)},t=function(a,c){return b.state(a,c)};return{strict:e,strictOf:f,strictObjOf:j,strictArrayOf:i,strictArrayOfObj:k,strictFunction:g,forbid:h,option:l,optionOf:m,optionObjOf:n,optionObjOfOnly:o,defaulted:p,defaultedOf:q,defaultedObjOf:r,field:s,state:t}}),g("10",["1p","1q","1j","r"],function(a,b,c,d){var e=[b.strict("url"),b.defaulted("fresh",!1)],f=c.objOf(e),g=c.objOf([b.field("urls","urls",a.strict(),c.arrOfObj(e))]);return{one:d.constant(f),many:d.constant(g)}}),g("h",["t","u","i","g","w","x","y","z","10","11"],function(a,b,c,d,e,f,g,h,i,j){return function(k,l,m){var n=e(m),o=f.get("ephox.link.service.one",i.one(),k+"/1/check?url=${url}&fresh=${fresh}",l),p=f.post("ephox.link.service.many",i.many(),k+"/1/check",l),q=function(a){return{url:a.url,result:c.derive(a.url,a.result)}},r=function(a,b){var c=function(b,c){return o.execute({url:j(a),fresh:c})},e=h.now(),f=g.single(c,n,a,e,void 0!==b&&b);return d.mapSync(f,q)},s=function(c,e){var f=function(a,b){return p.execute({urls:a})},i=function(a){return a.url},j=function(b){return a.indexOnKey(b.results,"url")},k=h.now(),l=g.multiple(f,n,c,j,i,k,void 0!==e&&e);return d.mapSync(l,function(a){return b.map(a,q)})};return{checkOne:r,checkMany:s,dumpCache:n.dump}}}),g("a",["h","i"],function(a,b,c){var d=function(a){var b=a.api_key;return b?b:a.linkchecker_api_key},e=function(b,c){var d=c?{"tinymce-api-key":c}:{};return a(b,d)},f=function(a){var b=e(a.linkchecker_service_url,d(a)),c=function(a){return b.checkOne(a)},f=function(a){return b.checkMany(a)};return{checkOne:c,checkMany:f}};return f}),h("j",document),h("k",document.location),h("l",tinymce.DOM),g("m",[],function(){var a=function(a){return a&&/^https?:\/\//.test(a)},b=function(a){return/^\w+:/.test(a)},c=function(a){return 0===a.indexOf("mailto:")},d=function(a){return"#"===a.charAt(0)},e=function(a){return c(a)||d(a)};return{isWebUrl:a,isValidLocalUrl:e,hasProtocol:b}}),g("8",["i","j","k","l","f","m"],function(a,b,c,d,e,f){var g="data-mce-linkchecker-status",h="data-mce-linkchecker-focus",i=function(a){var b=d.select("a[href]",a);return e.map(b,function(a){return l(d.getAttrib(a,"href"))})},j=function(a,b){d.setAttrib(a,g,b)},k=function(a){j(a,null)},l=function(a){return{url:a}},m=function(a,b){return e.map(b,function(b){return{url:a(l(d.getAttrib(b,"href"))).url,elm:b}})},n=function(a,b){return e.grep(a,function(a){return a.url===b})},o=function(b,c,f){var g=m(c,d.select("a[href]",b));e.each(f,function(b,c){e.each(n(g,c),function(c){a.cata(b.result,function(a){j(c.elm,"invalid")},function(a){j(c.elm,"unknown")},function(a){j(c.elm,"valid")})})})},p=function(a,b,c){var f=m(b,d.select("a[href]",a));e.each(c,function(a){e.each(n(f,a.url),function(a){j(a.elm,"invalid")})})},q=function(a){return"invalid"===d.getAttrib(a,g)},r=function(a,b){return d.setAttrib(a,h,b?"true":null)},s=function(a){return function(b){e.each(b,function(b){b.attr(a,null)})}},t=function(a){return f.isWebUrl(a)===!1&&f.hasProtocol(a)},u=function(a){return a.replace(/ /g,"%20")},v=function(a){var c=b.createElement("a");return c.href=a,f.isWebUrl(a)?c.href:a},w=function(a){return function(b){var d=b.url.trim(),e=t(d)?d:a.documentBaseURI.toAbsolute(d),f=u(0===e.indexOf("//")?c.protocol+e:e);return l(v(f))}},x=function(a){a.addTempAttr(g),a.addTempAttr(h),a.addAttributeFilter(g,s(g)),a.addAttributeFilter(h,s(g))};return{links:i,mark:j,unmark:k,highlight:o,markInvalidLinks:p,isInvalid:q,toggleFocus:r,registerAttrs:x,normalizer:w}}),h("12",tinymce.ui.Menu),h("1r",tinymce.Env),g("13",["l","1r","c","j","8"],function(a,b,c,d,e){var f=function(e){if(!b.ie||b.ie>10){var f=d.createElement("a");f.target="_blank",f.href=e,f.rel="noreferrer noopener";var g=d.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,c,!0,0,0,0,0,!1,!1,!1,!1,0,null),f.dispatchEvent(g)}else{var h=c.open("","_blank");if(h){h.opener=null;var i=h.document;i.open(),i.write('<meta http-equiv="refresh" content="0; url='+a.encode(e)+'">'),i.close()}}},g=function(a){return function(){a.execCommand("mceLink")}},h=function(b,c){return function(){var d=e.normalizer(b)({url:a.getAttrib(c,"href")});f(d.url)}},i=function(b,c){return function(){b.undoManager.transact(function(){a.remove(c,!0)})}},j=function(a,b){return function(){a.add(b.href),e.unmark(b)}};return{edit:g,view:h,unlink:i,ignore:j}}),g("n",["12","l","13","8","j"],function(a,b,c,d,e){var f=function(a,c,d){var e=b.getPos(a.getContentAreaContainer()),f=a.dom.getPos(d),g=a.dom.getRoot();"BODY"==g.nodeName?(f.x-=g.ownerDocument.documentElement.scrollLeft||g.scrollLeft,f.y-=g.ownerDocument.documentElement.scrollTop||g.scrollTop):(f.x-=g.scrollLeft,f.y-=g.scrollTop),e.x+=f.x,e.y+=f.y,c.moveTo(e.x,e.y+d.offsetHeight+1)},g=function(a){return a.plugins.link?{text:"Link",icon:"link",onclick:c.edit(a)}:null},h=function(b,h,i){var j=new a({items:[g(b),{text:"Open link",icon:"newtab",onclick:c.view(b,h)},{text:"Remove link",icon:"unlink",onclick:c.unlink(b,h)},{text:"-"},{text:"Ignore",onclick:c.ignore(i,h)}],context:"contextmenu",onhide:function(){j.remove(),d.toggleFocus(h,!1)}});j.renderTo(e.body),f(b,j,h),d.toggleFocus(h,!0)},i=function(a,b){return function(c){var e=a.dom.getParent(c.target,"a[href]");d.isInvalid(e)&&(c.preventDefault(),c.stopImmediatePropagation(),h(a,e,b))}},j=function(a,b){a.on("contextmenu",i(a,b),!0)};return{register:j}}),g("5",["e","f","g","a","8","m","n"],function(a,b,c,d,e,f,g){var h=function(a,c){return b.grep(a,function(a){return c.has(a.url)===!1})},i=function(a){return function(b){return f.isWebUrl(b.url)===a}},j=function(a){return b.grep(a,function(a){return f.isValidLocalUrl(a.url)===!1})},k=function(a,d,f,g,j){var k=b.grep(b.map(e.links(j),f),i(!0)),l=a.checkMany(h(k,d));c.handle(l,function(a){g.showError(a)},function(a){e.highlight(j,f,a)})},l=function(a,c,d,f,g){var k=b.grep(b.map(e.links(g),d),i(!1)),l=h(j(k),c);e.markInvalidLinks(g,d,l)},m=function(a,b,c,d,e){var f=e.getBody();k(a,b,c,d,f),l(a,b,c,d,f)},n=function(a,b){var c=a.linkchecker_content_css;return c?c:b+"/content.min.css"},o=function(b,c,d,f,h,i){var j=a.debounce(m,500);e.registerAttrs(b.serializer),b.dom.loadCSS(n(b.settings,i)),b.on("change setContent undo redo",function(){j(f,c,d,h,b)}),m(f,c,d,h,b),g.register(b,c)};return{setup:o}}),g("6",["e","m","8","g","i"],function(a,b,c,d,e){var f=function(a,b){return function(){return{status:a,message:b}}},g=f("invalid","Url does not seem to be valid"),h=f("none",""),i=f("valid","The url seem to be valid"),j=function(a,b){return function(c,f){var j=b.checkOne(c.url,a);d.handle(j,function(a){f({status:"none",message:""})},function(a){e.cata(a.result,function(a){f(g())},function(a){f(h())},function(a){f(i())})})}},k=function(c,d,e){var f=a.debounce(j(c,e),500);return function(a,c){var e=d({url:a.url});!b.isWebUrl(e.url)&&b.isValidLocalUrl(e.url)?c(i()):b.isWebUrl(e.url)?f(e,c):c(h())}},l=function(a,b,c,d){"filepicker_validator_handler"in a==!1&&(a.filepicker_validator_handler=k(b,c,d))};return{setup:l}}),g("7",[],function(){return function(){var a={},b=function(b){a[b]=!0},c=function(b){return b in a};return{add:b,has:c}}}),g("9",[],function(){return function(a){var b=0,c=function(c){if(b++<5&&!a.removed){var d="string"==typeof c?c:"Unknown error";a.notificationManager.open({text:"Link checker error: "+d,type:"error"})}};return{showError:c}}}),g("b",["j","8"],function(a,b){var c=function(b){var c=a.createElement("div");return c.className="mce-widget mce-tooltip mce-tooltip-s",c.setAttribute("role","presentation"),c.innerHTML='<div class="mce-tooltip-arrow"></div><div style="white-space:pre;" class="mce-tooltip-inner">'+b+"</div>",c},d=function(){var b,d=function(d,g){f();var h="This link seems to be invalid.",i=e(d,g);b=c(h),a.body.appendChild(b);var j=b.getBoundingClientRect(),k=d.getBody().getBoundingClientRect(),l=i.top-j.height/2,m=i.center-j.width/2;m<=0?(b.className="mce-widget mce-tooltip mce-tooltip-sw",m=i.center):i.center+j.width/2-20>k.width&&(b.className="mce-widget mce-tooltip mce-tooltip-se",m=i.center-j.width);var n="position:absolute;top:"+l+"px;left:"+m+"px;";b.setAttribute("style",n)},f=function(){void 0!==b&&(b.parentNode.removeChild(b),b=void 0)};return{add:d,remove:f}},e=function(a,b){var c=b.getBoundingClientRect(),d=a.inline?{top:0,left:0}:a.getContentAreaContainer().getBoundingClientRect(),e=a.dom.getViewPort(),f=c.top+d.top+e.y-c.height,g=c.left+d.left+e.x+c.width/2;return{top:f,center:g}};return{toolTip:d}}),g("0",["1","2","3","4","5","6","7","8","9","a","b"],function(a,b,c,d,e,f,g,h,i,j,k){var l=function(a){return"string"==typeof a.linkchecker_service_url},m=function(a,b,c,d){var e=b.dom.getParent(c,"a[href]");h.isInvalid(e)&&d===!0?a.add(b,e):a.remove()},n=function(b,n){if(d.isLessThan(a,"4.4.3"))return c.error('The "linkchecker" plugin requires at least 4.4.3 version of TinyMCE.'),function(){};var o=j(b.settings),p=g(),q=h.normalizer(b),r=i(b),s=k.toolTip();return b.on("SkinLoaded",function(){l(b.settings)?(e.setup(b,p,q,o,r,n),f.setup(b.settings,p,q,o)):r.showError("You need to specify the linkchecker_service_url setting")}),b.on("mouseover mouseout",function(a){var c=a.target,d="mouseover"===a.type;m(s,b,c,d)}),b.on("remove",function(){s.remove()}),{}};return b.add("linkchecker",n),function(){}}),d("0")()}();